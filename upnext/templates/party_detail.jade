extends ./layout.jade


block content
  link(rel='stylesheet', href="{% static 'css/party_detail.css' %}")
  .title-text
    h2 You are looking at {{ party.party_name }} by {{ party.user_nickname }}.
    .host
      h2 Currently hosted by {{ party.host }}. Not the right person? Enter the new host:
      form(method="POST")
        | {% csrf_token %}
        input(type='text', name='new_host', placeholder="Who's got the speakers?")
        .hidden
          button.btn.btn-primary(type='submit')

    span Created on {{ party.created_at }}
    h2 Got a song in mind? Look it up.
    .row
      .col-sm-12
        .search-bar
          form(method="GET")
            | {% csrf_token %}
            input#track_query(type='text', name='track_query', placeholder='Press Enter to search')
            .hidden
              button.btn.btn-primary(type='submit') Search
  .row

    | {% if tracks %}
    .col-xs-12.col-centered.playlist
      .row
        .col-xs-1.entry.default
          span Vote
        .col-xs-1.entry.default
          span Score
        .col-xs-5.entry.default
          span Song
        .col-xs-5.entry.default
          span Artist

      | {% for track in tracks %}
      .row
        .col-xs-1.entry.votes
          form(method="POST")
            | {% csrf_token %}
            button.btn-xs(name='track_up', value='{{ track }}', type='submit', class='glyphicon glyphicon-arrow-up')

          form(method="POST")
            | {% csrf_token %}
            button.btn-xs(name='track_down', value='{{ track }}', type='submit', class='glyphicon glyphicon-arrow-down')
        .col-xs-1.entry.score
          span {{ track.score }}&nbsp;
          | {% if track.score == 1 or track.score == -1 %}
          span.hidden-sm point
          | {% else %}
          span.hidden-sm points
          | {% endif %}
        .col-xs-5.entry.track-name
          span {{ track.track_title }}

        .col-xs-5.entry.track-artist
          span {{ track.artist }}

      | {% endfor %}
    | {% else %}
    h3 No songs added yet!

    | {% endif %}
  .placeholder
  .row
    .col-sm-12
      .open-uri
        a.btn.btn-primary(href="{{ party.uri }}") Play in Spotify!
